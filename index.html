<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>틱택토 시작</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <div class="background-container login-bg">
    <!-- 투명 버튼 영역 - class와 id 모두 추가 -->
    <button class="click-area guest" id="guestBtn">게스트 로그인</button>
    <div class="click-area google"><img src="img/google.png" alt="Google Logo" class="login-logo">Google로 로그인</div>
    <div class="click-area kakao"><img src="img/kakao.png" alt="Kakao Logo" class="login-logo">카카오로 로그인</div>
    <div class="click-area naver"><img src="img/naver.png" alt="Naver Logo" class="login-logo">네이버로 로그인</div>
    <button class="click-area rules" id="rulesBtn">틱택토 게임 룰 보러가기</button>
  </div>
 
  <!-- 닉네임 입력 모달 -->
  <div id="nicknameModal" class="modal hidden">
    <div class="modal-content">
      <h2>닉네임 입력</h2>
      <input type="text" id="nicknameInput" placeholder="닉네임 입력" />
      <button id="confirmNicknameBtn" disabled>시작하기</button>
    </div>
  </div>
 
  <script type="module">
    import { saveGuestNickname } from './js/auth.js';
 
    document.addEventListener("DOMContentLoaded", () => {
      const confirmBtn = document.getElementById("confirmNicknameBtn");
      const nicknameInput = document.getElementById("nicknameInput");
 
      // null 체크 추가
      if (confirmBtn && nicknameInput) {
        confirmBtn.addEventListener("click", () => {
          const nickname = nicknameInput.value.trim();
          if (!nickname) return;
 
          saveGuestNickname(nickname).then(() => {
            window.location.href = "main.html";
          });
        });
      }
    });
  </script>
  
  <script>
    // 로그인 함수들 정의 (없으면 오류 발생)
    function loginWithGoogle() {
      console.log("Google 로그인");
      // Google 로그인 로직 구현
    }
    
    function loginWithKakao() {
      console.log("Kakao 로그인");
      // Kakao 로그인 로직 구현
    }
    
    function loginWithNaver() {
      console.log("Naver 로그인");
      // Naver 로그인 로직 구현
    }

    document.addEventListener("DOMContentLoaded", () => {
      // 모든 요소에 null 체크 추가
      const guestBtn = document.getElementById("guestBtn");
      const googleBtn = document.getElementById("googleBtn");
      const kakaoBtn = document.getElementById("kakaoBtn");
      const naverBtn = document.getElementById("naverBtn");
      const rulesBtn = document.getElementById("rulesBtn");
      const modal = document.getElementById("nicknameModal");
      const nicknameInput = document.getElementById("nicknameInput");
      const confirmBtn = document.getElementById("confirmNicknameBtn");

      // 게스트 버튼
      if (guestBtn && modal) {
        guestBtn.addEventListener("click", () => {
          modal.classList.remove("hidden");
        });
      }

      // 닉네임 입력 처리
      if (nicknameInput && confirmBtn) {
        nicknameInput.addEventListener("input", () => {
          confirmBtn.disabled = nicknameInput.value.trim() === "";
        });
      }

      // 소셜 로그인 버튼들
      if (googleBtn) {
        googleBtn.addEventListener("click", () => loginWithGoogle());
      }
      
      if (kakaoBtn) {
        kakaoBtn.addEventListener("click", () => loginWithKakao());
      }
      
      if (naverBtn) {
        naverBtn.addEventListener("click", () => loginWithNaver());
      }

      // 규칙 버튼
      if (rulesBtn) {
        rulesBtn.addEventListener("click", () => {
          window.open("rules.html", "_blank");
        });
      }
    });
  </script>
</body>
</html>

