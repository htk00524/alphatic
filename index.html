<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>í‹±íƒí†  ì‹œì‘</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <div class="background-container login-bg">
    <!-- íˆ¬ëª… ë²„íŠ¼ ì˜ì—­ -->
    <button id="guestBtn" class="click-area guest"></button>
    <button id="googleBtn" class="click-area google"></button>
    <button id="kakaoBtn" class="click-area kakao"></button>
    <button id="naverBtn" class="click-area naver"></button>
    <button id="rulesBtn" class="click-area rules"></button>
  </div>

  <!-- ë‹‰ë„¤ì„ ì…ë ¥ ëª¨ë‹¬ -->
  <div id="nicknameModal" class="modal hidden">
    <div class="modal-content">
      <h2>ë‹‰ë„¤ì„ ì…ë ¥</h2>
      <input type="text" id="nicknameInput" placeholder="ë‹‰ë„¤ì„ ì…ë ¥" />
      <button id="confirmNicknameBtn" disabled>ì‹œì‘í•˜ê¸°</button>
    </div>
  </div>

  <script type="module">
  import { saveGuestNickname } from './js/auth.js';

  document.addEventListener("DOMContentLoaded", () => {
    const confirmBtn = document.getElementById("confirmNicknameBtn");
    const nicknameInput = document.getElementById("nicknameInput");

    // ğŸ”¸ ê²ŒìŠ¤íŠ¸ ë‹‰ë„¤ì„ í™•ì¸ ë²„íŠ¼
    confirmBtn.addEventListener("click", async () => {
      const nickname = nicknameInput.value.trim();
      if (!nickname) return;

      try {
        // âœ… ë°±ì—”ë“œì— ë‹‰ë„¤ì„ ì €ì¥ ë° í† í° ë°œê¸‰ ìš”ì²­
        const result = await saveGuestNickname(nickname);

        console.log('ë¡œê·¸ì¸ ì„±ê³µ:', result); // ğŸ” ë””ë²„ê¹…ìš©

        // í˜ì´ì§€ ì´ë™ (ì˜ˆ: main.html)
        window.location.href = "main.html";
      } catch (err) {
        alert("ë¡œê·¸ì¸ ì‹¤íŒ¨: " + err.message);
      }
    });
  });
</script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const guestBtn = document.getElementById("guestBtn");
    const googleBtn = document.getElementById("googleBtn");
    const kakaoBtn = document.getElementById("kakaoBtn");
    const naverBtn = document.getElementById("naverBtn");
    const rulesBtn = document.getElementById("rulesBtn");

    const modal = document.getElementById("nicknameModal");
    const nicknameInput = document.getElementById("nicknameInput");
    const confirmBtn = document.getElementById("confirmNicknameBtn");

    // ğŸ”¸ ê²ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­ ì‹œ ë‹‰ë„¤ì„ ëª¨ë‹¬ ì—´ê¸°
    guestBtn.addEventListener("click", () => {
      modal.classList.remove("hidden");
    });

    nicknameInput.addEventListener("input", () => {
      confirmBtn.disabled = nicknameInput.value.trim() === "";
    });

    // ğŸ”¹ ì†Œì…œ ë¡œê·¸ì¸ ë²„íŠ¼ë“¤
    googleBtn.addEventListener("click", () => loginWithGoogle()); // âœ… Google ë¡œê·¸ì¸
    kakaoBtn.addEventListener("click", () => loginWithKakao());   // âœ… Kakao ë¡œê·¸ì¸
    naverBtn.addEventListener("click", () => loginWithNaver());   // âœ… Naver ë¡œê·¸ì¸

    // ğŸ”¸ ê·œì¹™ ë²„íŠ¼ í´ë¦­ ì‹œ ê·œì¹™ í˜ì´ì§€ ì—´ê¸°
    rulesBtn.addEventListener("click", () => {
      window.open("rules.html", "_blank");
    });
  });
</script>